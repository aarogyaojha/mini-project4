<!DOCTYPE html>
<html>
  <head>
    <title>TSP Solver</title>
    <style>
      #map {
        height: 400px;
        width: 100%;
      }
    </style>
  </head>
  <body>
    <h1>TSP Solver</h1>

    <div>
      <label for="city-name">City Name:</label>
      <input type="text" id="city-name" />
      <label for="city-x">X Coordinate:</label>
      <input type="number" id="city-x" />
      <label for="city-y">Y Coordinate:</label>
      <input type="number" id="city-y" />
      <button onclick="addCity()">Add City</button>
    </div>

    <div>
      <h2>City List:</h2>
      <ul id="city-list"></ul>
    </div>

    <div>
      <button onclick="solveTSP()">Solve TSP</button>
    </div>

    <div>
      <h2>Shortest Route:</h2>
      <ul id="shortest-route"></ul>
      <p id="shortest-distance"></p>
    </div>

    <div id="map"></div>

    <script>
      let cities = [];

      function addCity() {
        const cityNameInput = document.getElementById("city-name");
        const cityXInput = document.getElementById("city-x");
        const cityYInput = document.getElementById("city-y");

        const city = {
          name: cityNameInput.value,
          x: parseInt(cityXInput.value),
          y: parseInt(cityYInput.value),
        };

        cities.push(city);
        updateCityList();
        clearCityInputs();
      }

      function updateCityList() {
        const cityList = document.getElementById("city-list");
        cityList.innerHTML = "";

        cities.forEach((city) => {
          const li = document.createElement("li");
          li.textContent = `${city.name} (${city.x}, ${city.y})`;
          cityList.appendChild(li);
        });
      }

      function clearCityInputs() {
        document.getElementById("city-name").value = "";
        document.getElementById("city-x").value = "";
        document.getElementById("city-y").value = "";
      }

      function solveTSP() {
        const shortestRoute = findShortestRoute(cities);
        const shortestDistance = calculateDistance(shortestRoute);

        displayShortestRoute(shortestRoute);
        displayShortestDistance(shortestDistance);
        displayRouteOnMap(shortestRoute);
      }

      function calculateDistance(points) {
        // Calculate the distance between two points
        function distance(point1, point2) {
          const dx = point1.x - point2.x;
          const dy = point1.y - point2.y;
          return Math.sqrt(dx * dx + dy * dy);
        }

        let totalDistance = 0;

        for (let i = 0; i < points.length - 1; i++) {
          const point1 = points[i];
          const point2 = points[i + 1];
          totalDistance += distance(point1, point2);
        }

        // Add the distance from the last point to the first point
        totalDistance += distance(points[points.length - 1], points[0]);

        return totalDistance;
      }

      function findShortestRoute(cities) {
        // Implement your algorithm to find the shortest route here
        // This function should return an array representing the shortest route

        // Example implementation: Return the cities in the same order they were added
        return cities;
      }

      function displayShortestRoute(route) {
        const shortestRouteElement = document.getElementById("shortest-route");
        shortestRouteElement.innerHTML = "";

        route.forEach((city) => {
          const li = document.createElement("li");
          li.textContent = city.name;
          shortestRouteElement.appendChild(li);
        });
      }

      function displayShortestDistance(distance) {
        const shortestDistanceElement =
          document.getElementById("shortest-distance");
        shortestDistanceElement.textContent = `Shortest distance: ${distance.toFixed(
          2
        )}`;
      }

      function displayRouteOnMap(route) {
        const mapElement = document.getElementById("map");
        const mapOptions = {
          zoom: 5,
          center: new google.maps.LatLng(route[0].x, route[0].y),
        };
        const map = new google.maps.Map(mapElement, mapOptions);
        const routeCoordinates = route.map(
          (city) => new google.maps.LatLng(city.x, city.y)
        );
        const routePath = new google.maps.Polyline({
          path: routeCoordinates,
          geodesic: true,
          strokeColor: "#FF0000",
          strokeOpacity: 1.0,
          strokeWeight: 2,
        });
        routePath.setMap(map);
      }
    </script>
    <script
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBPgCD8CI4wtUk1VsYr3itIqKp_DMPfU5Y&callback=initMap"
      async
      defer
    ></script>
  </body>
</html>
